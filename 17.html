<!DOCTYPE html>
<html lang="es-CL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Mental Power BI - Interactivo</title>
    <style>
        /* --- VARIABLES DE COLOR (Placeholder - Puedes cambiar estos valores) --- */
        :root {
            --color-mapa-primario: #005A9C; /* Azul OTEC Ejemplo */
            --color-mapa-secundario: #6c757d; /* Gris Neutro Ejemplo */
            --color-mapa-acento: #F0A800;   /* Amarillo/Naranja Ejemplo */
            --color-mapa-fondo-nodo: #f8f9fa; /* Gris muy claro */
            --color-mapa-borde: #dee2e6;   /* Borde gris */
            --color-mapa-linea: #adb5bd;    /* Color de las líneas */
            --fuente-mapa: 'Lato', sans-serif; /* Fuente Ejemplo */
        }

        /* --- ESTILOS BASE DEL MAPA MENTAL --- */
        body { /* Asegura que la fuente se aplique globalmente si no hay otra definida */
             font-family: var(--fuente-mapa);
        }
        .mindmap-container {
            font-family: var(--fuente-mapa);
            padding: 20px;
            overflow-x: auto;
        }

        .mindmap {
            list-style: none;
            padding: 0;
            margin: 0;
            /* display: inline-block; */ /* Puede ayudar en algunos layouts */
        }

        .mindmap ul {
            list-style: none;
            padding-left: 50px; /* Indentación para niveles */
            margin: 0;
            position: relative; /* Contexto para las líneas */
        }

        /* Esconder sub-árboles por defecto */
        .mindmap ul.subtree {
            display: none;
        }
        /* Mostrar sub-árboles cuando el LI padre tenga la clase 'expanded' */
        .mindmap li.expanded > ul.subtree {
            display: block;
        }


        .mindmap li {
            margin: 10px 0; /* Espacio vertical entre items */
            position: relative; /* Contexto para las líneas y el nodo */
            padding-left: 30px; /* Espacio para la línea horizontal */
        }

        /* --- ESTILO DE LOS NODOS (El texto/idea) --- */
        .mindmap li > .node-container { /* Contenedor para nodo y botón */
             display: flex; /* Alinear nodo y botón */
             align-items: center;
             position: relative; /* Para que esté sobre las líneas */
             z-index: 1;
             width: fit-content; /* Ajustar ancho al contenido */
        }

        .mindmap li > .node-container > div.node {
            padding: 8px 12px; /* Espaciado interno del nodo */
            border: 1px solid var(--color-mapa-borde);
            border-radius: 6px;
            background-color: var(--color-mapa-fondo-nodo);
            margin-right: 5px; /* Espacio entre nodo y botón */
             flex-grow: 0; /* No permitir que crezca */
             transition: transform 0.2s ease, box-shadow 0.2s ease; /* Efecto hover */
        }
        .mindmap li > .node-container > div.node:hover {
             transform: translateY(-2px); /* Leve movimiento hacia arriba */
             box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Sombra suave */
         }


        /* Estilo especial para el nodo RAÍZ */
        .mindmap > li > .node-container > div.node {
            background-color: var(--color-mapa-primario);
            color: white;
            border-color: var(--color-mapa-primario);
            font-weight: bold;
            font-size: 1.1em;
        }
        /* Estilo para nodos de segundo nivel (opcional) */
        .mindmap > li > ul > li > .node-container > div.node {
             border-left: 4px solid var(--color-mapa-acento);
        }
         /* Estilo para nodos de tercer nivel (opcional) */
         .mindmap > li > ul > li > ul > li > .node-container > div.node {
             border-left: 4px solid var(--color-mapa-secundario);
             background-color: #fff; /* Fondo blanco para diferenciar */
         }

        .mindmap li > .node-container > div.node .node-details {
            display: block; /* Detalles en nueva línea */
            font-size: 0.85em;
            color: #555;
            margin-top: 4px;
            font-weight: normal; /* Resetear bold si hereda */
        }
         .mindmap > li > .node-container > div.node .node-details { /* Detalles del nodo raíz */
             color: #eee;
         }

         /* --- ESTILO DEL BOTÓN TOGGLE --- */
         .mindmap button.toggle {
             background-color: var(--color-mapa-secundario);
             color: white;
             border: none;
             border-radius: 50%; /* Círculo */
             width: 22px; /* Ligeramente más grande */
             height: 22px;
             font-size: 16px; /* Tamaño del + / - */
             font-weight: bold;
             line-height: 20px; /* Ajustar para centrar mejor */
             text-align: center;
             cursor: pointer;
             padding: 0;
             margin-left: 5px; /* Espacio respecto al nodo */
             flex-shrink: 0; /* Evitar que se encoja */
             transition: background-color 0.2s ease, transform 0.2s ease;
             user-select: none; /* Evitar seleccionar texto del botón */
         }
         .mindmap button.toggle:hover {
             background-color: var(--color-mapa-primario);
             transform: scale(1.1);
         }
         /* Cambiar el símbolo cuando está expandido */
          .mindmap li.expanded > .node-container > button.toggle::before {
             content: '−'; /* Signo menos */
         }
         .mindmap li:not(.has-children) > .node-container > button.toggle {
              display: none; /* Ocultar botón si no hay hijos (vía JS es más seguro) */
          }
         .mindmap li:not(.expanded) > .node-container > button.toggle::before {
             content: '+'; /* Signo más */
         }


        /* --- SIMULACIÓN DE LÍNEAS DE CONEXIÓN --- */
        .mindmap ul::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0; /* Desde el borde superior */
            bottom: 0; /* Hasta el borde inferior */
            width: 1px;
            background-color: var(--color-mapa-linea);
            z-index: 0;
        }

        .mindmap li::before {
            content: '';
            position: absolute;
            left: -20px; /* Ajustar para que conecte con la línea vertical */
            top: 19px; /* Alinear verticalmente con el centro del botón/nodo (ajustar) */
            width: 20px;
            height: 1px;
            background-color: var(--color-mapa-linea);
            z-index: 0;
        }

         /* Ocultar líneas para el elemento raíz */
         .mindmap > li {
             padding-left: 0;
             margin-left: 0;
         }
        .mindmap > li::before,
        .mindmap > li::after {
            display: none; /* Sin líneas para el nodo raíz */
        }
         .mindmap > li > ul::before {
              /* La línea vertical de la UL hija sí debe mostrarse */
              /* Excepto si es la UL directa de la raíz? */
              /* display: none; */ /* Probar comentar/descomentar esta línea si las líneas no se ven bien */
              left: -25px; /* Ajustar posición si la UL tiene padding */
          }
          .mindmap > li > ul {
               padding-left: 50px; /* Mantener indentación */
           }
           /* La línea horizontal de los hijos directos de la raíz debe mostrarse */
           .mindmap > li > ul > li::before {
               display: block;
           }


        /* --- ESTILOS PARA IMPRESIÓN (La interactividad no funcionará) --- */
        @media print {
            .mindmap-container {
                overflow-x: visible;
                padding: 0;
            }
            .mindmap button.toggle {
                display: none !important; /* Ocultar botones en impresión */
            }
             /* Forzar expansión en impresión (para que se vea todo en el PDF) */
             .mindmap ul.subtree {
                 display: block !important;
             }
             .mindmap li.expanded { /* Quitar clase por si acaso */
                 /* No es necesario hacer nada aquí si forzamos display: block */
             }

             /* Estilos de nodos y líneas para impresión */
             .mindmap li > .node-container > div.node {
                 border: 1px solid #666 !important;
                 background-color: #fff !important;
                 color: #000 !important;
                 box-shadow: none !important;
                 transform: none !important;
                 margin-right: 0; /* Quitar margen si el botón no está */
                 padding: 6px 10px; /* Reducir padding si es necesario */
             }
             .mindmap > li > .node-container > div.node {
                 background-color: #ddd !important;
                 border-color: #666 !important;
                 color: #000 !important;
             }
              .mindmap li > .node-container > div.node .node-details {
                 color: #333 !important;
                 font-size: 0.8em;
             }
            .mindmap ul::before,
            .mindmap li::before {
                background-color: #999 !important; /* Líneas más visibles */
            }
            /* Forzar impresión de fondos/bordes */
            /* -webkit-print-color-adjust: exact; print-color-adjust: exact; */
        }

    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">

</head>
<body>

<h1>Mapa Mental Interactivo de Power BI</h1>
<p>Haz clic en los botones [+] para expandir las ramas.</p>

<div class="mindmap-container">
    <ul class="mindmap">
        <li> <div class="node-container">
                 <div class="node">📊 Power BI</div>
                 </div>
            <ul class="subtree"> <li> <div class="node-container">
                         <div class="node">¿Qué es Power BI?
                              <span class="node-details">Plataforma BI Microsoft para conectar, modelar, visualizar y compartir datos.</span>
                         </div>
                         </div>
                </li>
                <li class="has-children"> <div class="node-container">
                        <div class="node">Componentes Principales</div>
                        <button class="toggle" aria-label="Expandir/Contraer"></button>
                    </div>
                    <ul class="subtree">
                        <li><div class="node-container"><div class="node">Power BI Desktop <span class="node-details">Herramienta de autoría (gratuita).</span></div></div></li>
                        <li><div class="node-container"><div class="node">Power BI Service <span class="node-details">Plataforma cloud (SaaS).</span></div></div></li>
                        <li><div class="node-container"><div class="node">Power BI Mobile <span class="node-details">Apps móviles.</span></div></div></li>
                        <li><div class="node-container"><div class="node">Otros <span class="node-details">Report Server, Embedded.</span></div></div></li>
                    </ul>
                </li>
                <li class="has-children"> <div class="node-container">
                         <div class="node">Flujo de Trabajo Típico ⚙️</div>
                         <button class="toggle" aria-label="Expandir/Contraer"></button>
                     </div>
                     <ul class="subtree">
                         <li><div class="node-container"><div class="node">1. Obtener Datos (Get Data) <span class="node-details">Conexión a fuentes (Excel, BD, Cloud...).</span></div></div></li>
                         <li><div class="node-container"><div class="node">2. Transformar y Modelar <span class="node-details">Power Query (ETL) y DAX (Cálculos).</span></div></div></li>
                         <li><div class="node-container"><div class="node">3. Visualizar Datos <span class="node-details">Informes y Paneles (Dashboards).</span></div></div></li>
                         <li><div class="node-container"><div class="node">4. Compartir y Colaborar <span class="node-details">Publicar, Workspaces, Apps.</span></div></div></li>
                     </ul>
                </li>
                 <li class="has-children"> <div class="node-container">
                         <div class="node">Conceptos Clave 🔑</div>
                         <button class="toggle" aria-label="Expandir/Contraer"></button>
                     </div>
                     <ul class="subtree">
                        <li><div class="node-container"><div class="node">Conjunto de Datos (Dataset)</div></div></li>
                        <li><div class="node-container"><div class="node">Informe (Report)</div></div></li>
                        <li><div class="node-container"><div class="node">Panel (Dashboard)</div></div></li>
                        <li><div class="node-container"><div class="node">Icono/Mosaico (Tile)</div></div></li>
                        <li><div class="node-container"><div class="node">Power Query</div></div></li>
                        <li><div class="node-container"><div class="node">DAX</div></div></li>
                     </ul>
                 </li>
                 <li class="has-children"> <div class="node-container">
                         <div class="node">Licenciamiento 💰</div>
                         <button class="toggle" aria-label="Expandir/Contraer"></button>
                     </div>
                      <ul class="subtree">
                        <li><div class="node-container"><div class="node">Gratuito (Free)</div></div></li>
                        <li><div class="node-container"><div class="node">Pro</div></div></li>
                        <li><div class="node-container"><div class="node">Premium (PPU / Capacity)</div></div></li>
                     </ul>
                 </li>
                 <li class="has-children"> <div class="node-container">
                         <div class="node">Beneficios Principales ✅</div>
                         <button class="toggle" aria-label="Expandir/Contraer"></button>
                     </div>
                      <ul class="subtree">
                        <li><div class="node-container"><div class="node">Visualizaciones Interactivas</div></div></li>
                        <li><div class="node-container"><div class="node">Consolidación de Datos</div></div></li>
                        <li><div class="node-container"><div class="node">Toma de Decisiones Informada</div></div></li>
                        <li><div class="node-container"><div class="node">Democratización de Datos</div></div></li>
                     </ul>
                 </li>
            </ul>
        </li>
    </ul>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Selecciona todos los LI que tienen hijos directamente dentro del mapa mental principal
        // Se asume que solo los LI con un UL.subtree como hijo directo son expandibles
        const parentLis = document.querySelectorAll('.mindmap li:has(> ul.subtree)');

         parentLis.forEach(parentLi => {
            // Encontrar el botón toggle dentro del node-container de este LI
            const toggleButton = parentLi.querySelector(':scope > .node-container > button.toggle');

             // Asegurarse que el botón existe
             if (toggleButton) {
                 // Añadir la clase 'has-children' si no la pusimos manualmente en HTML
                 parentLi.classList.add('has-children');

                 toggleButton.addEventListener('click', function(event) {
                    // Evitar que otros eventos se disparen si es necesario
                    event.stopPropagation();

                     // Toggle (añade o quita) la clase 'expanded' en el LI padre
                     parentLi.classList.toggle('expanded');

                     // (Opcional: Actualizar aria-expanded para accesibilidad)
                     const isExpanded = parentLi.classList.contains('expanded');
                     this.setAttribute('aria-expanded', isExpanded);
                 });
             } else {
                 // Si un LI tiene un subtree pero no encontramos botón (error en HTML?), loguear
                 // console.warn('List item has subtree but no toggle button found:', parentLi);
             }
         });

        // Opcional: Si quieres que todo empiece expandido, puedes añadir la clase 'expanded' por defecto
        // O descomentar esto para simular clicks en todos los botones al inicio
        /*
        const allToggles = document.querySelectorAll('.mindmap button.toggle');
        allToggles.forEach(toggle => {
           // toggle.click(); // Cuidado, esto puede ser lento si hay muchos nodos
           // O añadir la clase directamente al LI padre
           const parentLi = toggle.closest('li');
           if(parentLi) parentLi.classList.add('expanded');
        });
        */

    });
</script>

</body>
</html>
